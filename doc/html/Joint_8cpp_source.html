<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>cpr_robot: Joint.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Joint.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Joint_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="cpr__robot_8h.html">cpr_robot.h</a>&gt;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacecpr__robot.html">cpr_robot</a></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;{</div><div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a624d26c85789eada0b78d4748ec53d31">   10</a></span>&#160;    <a class="code" href="classcpr__robot_1_1Joint.html#a624d26c85789eada0b78d4748ec53d31">Joint::Joint</a>(<a class="code" href="classcpr__robot_1_1Bus.html">Bus</a>&amp; canBus, <span class="keyword">const</span> uint32_t moduleId)</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    {</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>=<span class="keyword">new</span> <a class="code" href="classcpr__robot_1_1MotorModule.html">MotorModule</a>(canBus,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)moduleId);</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        std::stringstream sstrm;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        sstrm &lt;&lt; <span class="stringliteral">&quot;joint&quot;</span> &lt;&lt; (moduleId+1);</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#ade16600f46e08cffd4f9d72bfd1bb282">m_JointName</a>=sstrm.str();</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#ab7e08d821b4bfc5a0373414cbbb3e339">m_CurrentEffort</a>=0.0;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#aa822474e44e6ac0486f34130ba7b99d9">m_CurrentPosition</a>=0.0;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a592cd8bcfe74f251e230197430492d1f">m_CurrentVelocity</a>=0.0;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a2a3c49a2aab7a7b20afe28106268e750">m_MaxVelocity</a>=M_PI*45.0/180.0;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#ad887b96410906536a29c1b933507b59b">m_DesiredVelocity</a>=0.0;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a8ed8e435b58b761bf9f71834d52602a9">m_GearRatio</a>=1.0;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a4da092bb68fa9d4ada9f29ce90d6a1b5">m_bReferenced</a>=<span class="keyword">false</span>;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#af242793ddfddbb4dd9d2188ada4f9063">m_TicksPerMotorRotation</a>=2000;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#aefe1109a5974ffb681e79c57147ff36e">m_ErrorFlags</a>=0x00;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    }</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a438a490b29b4b19817f2a2b8948ad3bd">   29</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classcpr__robot_1_1Joint.html#a438a490b29b4b19817f2a2b8948ad3bd">Joint::get_IsReferenced</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#a4da092bb68fa9d4ada9f29ce90d6a1b5">m_bReferenced</a>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    }</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a899b6077763552761845ab31f79214a1">   35</a></span>&#160;    <a class="code" href="classcpr__robot_1_1Joint.html#a899b6077763552761845ab31f79214a1">Joint::~Joint</a>()</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keyword">delete</span> <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    }</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a54a2c42a9f717031ca65ef96e774dc09">   42</a></span>&#160;    <span class="keyword">const</span> std::string&amp; <a class="code" href="classcpr__robot_1_1Joint.html#a54a2c42a9f717031ca65ef96e774dc09">Joint::get_JointName</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#ade16600f46e08cffd4f9d72bfd1bb282">m_JointName</a>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a66a0e2cbdd5f222bafac25f4c01b3ca8">   49</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a66a0e2cbdd5f222bafac25f4c01b3ca8">Joint::set_JointName</a>(<span class="keyword">const</span> std::string&amp; jointName)</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#ade16600f46e08cffd4f9d72bfd1bb282">m_JointName</a>=jointName;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a8e570ed99b9e53ac085ec9fadd35eaa9">   56</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#a8e570ed99b9e53ac085ec9fadd35eaa9">Joint::get_CurrentPosition</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#aa822474e44e6ac0486f34130ba7b99d9">m_CurrentPosition</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a140b26d969f491c8242231aefa634634">   63</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#a140b26d969f491c8242231aefa634634">Joint::get_CurrentVelocity</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#a592cd8bcfe74f251e230197430492d1f">m_CurrentVelocity</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#ac03ee9878d68ac22e206141a49af61f1">   70</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#ac03ee9878d68ac22e206141a49af61f1">Joint::get_CurrentEffort</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#ab7e08d821b4bfc5a0373414cbbb3e339">m_CurrentEffort</a>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;     </div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#af314a7c4bda98201201ce6c85e141e1f">   78</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#af314a7c4bda98201201ce6c85e141e1f">Joint::OnInit</a>()</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    {</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        uint8_t dataBits;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#aa822474e44e6ac0486f34130ba7b99d9">m_CurrentPosition</a>=<a class="code" href="classcpr__robot_1_1Joint.html#a8b45ee724ab9e8b379f8ce614aad5c9c">ReadPosition</a>(<a class="code" href="classcpr__robot_1_1Joint.html#a9c7abfbbd295ba8dd434c7ec170279a3">m_LastTimeStamp</a>, <a class="code" href="classcpr__robot_1_1Joint.html#a8e143914f01de10b06417f3658064152">m_LastUpdate</a>,<a class="code" href="classcpr__robot_1_1Joint.html#aefe1109a5974ffb681e79c57147ff36e">m_ErrorFlags</a>, dataBits);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a4da092bb68fa9d4ada9f29ce90d6a1b5">m_bReferenced</a>=(dataBits&amp;<a class="code" href="classcpr__robot_1_1Joint.html#a6ef10911d6217928226ad40b3b35620b">DATABIT_REFERENCED</a>)!=0x00;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#ab7e08d821b4bfc5a0373414cbbb3e339">m_CurrentEffort</a>=0.0;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a592cd8bcfe74f251e230197430492d1f">m_CurrentVelocity</a>=0.0;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#ad887b96410906536a29c1b933507b59b">m_DesiredVelocity</a>=0.0;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a2763db45968efc6e978f9c7119b0e78c">m_JointJogSubscriber</a>=<a class="code" href="classcpr__robot_1_1Joint.html#a1109c9bcdd0ca8e32ebf8b19b9eb84e6">m_Node</a>.subscribe(<span class="stringliteral">&quot;/JointJog&quot;</span>,10,&amp;<a class="code" href="classcpr__robot_1_1Joint.html#a0df4c7eef1f2708d5a1df02e37d4f77d">Joint::JointJogCallback</a>, <span class="keyword">this</span>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    </div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a0df4c7eef1f2708d5a1df02e37d4f77d">   91</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a0df4c7eef1f2708d5a1df02e37d4f77d">Joint::JointJogCallback</a>(<span class="keyword">const</span> control_msgs::JointJog&amp; msg)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0;i&lt;msg.joint_names.size();i++)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keywordflow">if</span>(msg.joint_names[i]==<a class="code" href="classcpr__robot_1_1Joint.html#ade16600f46e08cffd4f9d72bfd1bb282">m_JointName</a>)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">if</span>(msg.velocities.size()&gt;i)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                    <a class="code" href="classcpr__robot_1_1Joint.html#ad887b96410906536a29c1b933507b59b">m_DesiredVelocity</a>=msg.velocities[i]*<a class="code" href="classcpr__robot_1_1Joint.html#a2a3c49a2aab7a7b20afe28106268e750">m_MaxVelocity</a>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a3578f2c7039da34d4c9c14697aea345f">  107</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#a3578f2c7039da34d4c9c14697aea345f">Joint::get_DesiredVelocity</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#ad887b96410906536a29c1b933507b59b">m_DesiredVelocity</a>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    </div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a87fa401b2e67be3bd622c0bed09b0fef">  114</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#a87fa401b2e67be3bd622c0bed09b0fef">Joint::get_MaxVeclocity</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">return</span> 180.0*<a class="code" href="classcpr__robot_1_1Joint.html#a2a3c49a2aab7a7b20afe28106268e750">m_MaxVelocity</a>/M_PI;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    </div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a31d7af000c1a4c2963de43e9eb07e9a2">  121</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a31d7af000c1a4c2963de43e9eb07e9a2">Joint::set_MaxVelocity</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> velocity)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a2a3c49a2aab7a7b20afe28106268e750">m_MaxVelocity</a>=M_PI*velocity/180.0;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    </div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#afd75fadedb39663cf1ed1ea2b345e315">  128</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#afd75fadedb39663cf1ed1ea2b345e315">Joint::get_MinPosition</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">return</span> 180.0*<a class="code" href="classcpr__robot_1_1Joint.html#a10d1c516c93e1a062cf94721ed2a3b03">TicksToPosition</a>(<a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#a83693cf0ff616483070eb11dc3038ef4">get_MinPosition</a>())/M_PI;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    </div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a922b09195ef7a3eb6497695ffd67a72e">  135</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a922b09195ef7a3eb6497695ffd67a72e">Joint::set_MinPosition</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> position)</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#aa21d4f01d0ebcb0902e2b75098d505de">set_MinPosition</a>(<a class="code" href="classcpr__robot_1_1Joint.html#a05bf10900f6cfa8c1b78e0612636e175">PositionToTicks</a>(M_PI*position/180.0));</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    </div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a0acd393c18e0f4e6443e17c2e925072a">  142</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#a0acd393c18e0f4e6443e17c2e925072a">Joint::get_MaxPosition</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">return</span> 180.0*<a class="code" href="classcpr__robot_1_1Joint.html#a10d1c516c93e1a062cf94721ed2a3b03">TicksToPosition</a>(<a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#a3953bfd3ff03b158d45755577dda6118">get_MaxPosition</a>())/M_PI;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    </div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#ace02fdff906b085f97b21d30542d57a5">  149</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#ace02fdff906b085f97b21d30542d57a5">Joint::set_MaxPosition</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> position)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#ae83d37ec4d8e876b4d70e074172bef16">set_MaxPosition</a>(M_PI*<a class="code" href="classcpr__robot_1_1Joint.html#a05bf10900f6cfa8c1b78e0612636e175">PositionToTicks</a>(position)/180.0);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    </div><div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a54378769e81258582e8191fc0bc16085">  156</a></span>&#160;    int32_t <a class="code" href="classcpr__robot_1_1Joint.html#a54378769e81258582e8191fc0bc16085">Joint::get_MotorOffset</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#a5c801f5be9982ac07a54c803dc5f96c2">get_Offset</a>();</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;         </div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#acae1e70cf1b034e7ac73a4c3769560b0">  163</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#acae1e70cf1b034e7ac73a4c3769560b0">Joint::set_MotorOffset</a>(<span class="keyword">const</span> int32_t ticks)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#a30ccc0642ad9fd96581f76e267737552">set_Offset</a>(ticks);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a5229089b4b34099ed5342555ce08abd2">  171</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a5229089b4b34099ed5342555ce08abd2">Joint::OnRead</a>()</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        uint8_t timeStamp;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        uint8_t errorFlags;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        std::chrono::high_resolution_clock::time_point newUpdate;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        uint8_t dataBits;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordtype">double</span> position=<a class="code" href="classcpr__robot_1_1Joint.html#a8b45ee724ab9e8b379f8ce614aad5c9c">ReadPosition</a>(timeStamp, newUpdate, errorFlags, dataBits);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">if</span>(timeStamp!=<a class="code" href="classcpr__robot_1_1Joint.html#a9c7abfbbd295ba8dd434c7ec170279a3">m_LastTimeStamp</a>)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="classcpr__robot_1_1Joint.html#a4da092bb68fa9d4ada9f29ce90d6a1b5">m_bReferenced</a>=(dataBits&amp;<a class="code" href="classcpr__robot_1_1Joint.html#a6ef10911d6217928226ad40b3b35620b">DATABIT_REFERENCED</a>)!=0x00;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="keywordtype">double</span> seconds=0.001*(double)std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(newUpdate - <a class="code" href="classcpr__robot_1_1Joint.html#a8e143914f01de10b06417f3658064152">m_LastUpdate</a>).count();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="classcpr__robot_1_1Joint.html#a8e143914f01de10b06417f3658064152">m_LastUpdate</a>=newUpdate;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <a class="code" href="classcpr__robot_1_1Joint.html#a592cd8bcfe74f251e230197430492d1f">m_CurrentVelocity</a>=(position-<a class="code" href="classcpr__robot_1_1Joint.html#aa822474e44e6ac0486f34130ba7b99d9">m_CurrentPosition</a>)/seconds;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="classcpr__robot_1_1Joint.html#aa822474e44e6ac0486f34130ba7b99d9">m_CurrentPosition</a>=position;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <a class="code" href="classcpr__robot_1_1Joint.html#ab7e08d821b4bfc5a0373414cbbb3e339">m_CurrentEffort</a>=0.0;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <a class="code" href="classcpr__robot_1_1Joint.html#aefe1109a5974ffb681e79c57147ff36e">m_ErrorFlags</a>=errorFlags;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <a class="code" href="classcpr__robot_1_1Joint.html#a9c7abfbbd295ba8dd434c7ec170279a3">m_LastTimeStamp</a>=timeStamp;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#aa67b65fe13b6d43f97faf8d97aa2420f">  193</a></span>&#160;    uint8_t <a class="code" href="classcpr__robot_1_1Joint.html#aa67b65fe13b6d43f97faf8d97aa2420f">Joint::get_ErrorFlags</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#aefe1109a5974ffb681e79c57147ff36e">m_ErrorFlags</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a05bf10900f6cfa8c1b78e0612636e175">  201</a></span>&#160;    int32_t <a class="code" href="classcpr__robot_1_1Joint.html#a05bf10900f6cfa8c1b78e0612636e175">Joint::PositionToTicks</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> position)<span class="keyword"> const</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordtype">double</span> motorRotations=position*<a class="code" href="classcpr__robot_1_1Joint.html#a8ed8e435b58b761bf9f71834d52602a9">m_GearRatio</a>/(2.0*M_PI);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        int32_t ticks=(int32_t)(motorRotations*((<span class="keywordtype">double</span>)<a class="code" href="classcpr__robot_1_1Joint.html#af242793ddfddbb4dd9d2188ada4f9063">m_TicksPerMotorRotation</a>));</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">return</span> ticks;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    </div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a10d1c516c93e1a062cf94721ed2a3b03">  211</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#a10d1c516c93e1a062cf94721ed2a3b03">Joint::TicksToPosition</a>(<span class="keyword">const</span> int32_t ticks)<span class="keyword"> const</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordtype">double</span> motorRotations=((double)ticks)/((double)<a class="code" href="classcpr__robot_1_1Joint.html#af242793ddfddbb4dd9d2188ada4f9063">m_TicksPerMotorRotation</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordtype">double</span> position=2.0*M_PI*motorRotations/<a class="code" href="classcpr__robot_1_1Joint.html#a8ed8e435b58b761bf9f71834d52602a9">m_GearRatio</a>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">return</span> position;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a5df47f7a0ee1901f9f8351eaa5333cee">  221</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a5df47f7a0ee1901f9f8351eaa5333cee">Joint::OnWrite</a>(<span class="keywordtype">double</span> <span class="keyword">override</span>)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classcpr__robot_1_1Joint.html#aefe1109a5974ffb681e79c57147ff36e">m_ErrorFlags</a>==0x00)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordtype">double</span> seconds=<a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#ae11a3a53211f6729f6dc8026d90f7485">get_UpdateInterval</a>();</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordtype">double</span> desiredPositionIncrement=<a class="code" href="classcpr__robot_1_1Joint.html#ad887b96410906536a29c1b933507b59b">m_DesiredVelocity</a>*seconds*<span class="keyword">override</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            int32_t desiredTicks=<a class="code" href="classcpr__robot_1_1Joint.html#a05bf10900f6cfa8c1b78e0612636e175">PositionToTicks</a>(desiredPositionIncrement);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#a9a00b6e1ca0a4009837bccbd44c8430e">set_Increment</a>(desiredTicks);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a893c05463055ae975a60e8dbd643d288">  235</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a893c05463055ae975a60e8dbd643d288">Joint::Init</a>()</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#af314a7c4bda98201201ce6c85e141e1f">OnInit</a>();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    </div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a81679f78d8804ef49bcdb6947a6f290e">  243</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a81679f78d8804ef49bcdb6947a6f290e">Joint::Read</a>()</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a5229089b4b34099ed5342555ce08abd2">OnRead</a>();</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    </div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a9b62b0ed8dfdb4ba932cdae1370b3d08">  252</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a9b62b0ed8dfdb4ba932cdae1370b3d08">Joint::Write</a>(<span class="keywordtype">double</span> <span class="keyword">override</span>)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a5df47f7a0ee1901f9f8351eaa5333cee">OnWrite</a>(<span class="keyword">override</span>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a70e6876e7b53b1764f3275d6ab0bb7a0">  262</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a70e6876e7b53b1764f3275d6ab0bb7a0">Joint::PublishState</a>(sensor_msgs::JointState&amp; msg)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        msg.position.push_back(<a class="code" href="classcpr__robot_1_1Joint.html#aa822474e44e6ac0486f34130ba7b99d9">m_CurrentPosition</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        msg.velocity.push_back(<a class="code" href="classcpr__robot_1_1Joint.html#a592cd8bcfe74f251e230197430492d1f">m_CurrentVelocity</a>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        msg.effort.push_back(0.0);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        msg.name.push_back(<a class="code" href="classcpr__robot_1_1Joint.html#ade16600f46e08cffd4f9d72bfd1bb282">m_JointName</a>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a8b45ee724ab9e8b379f8ce614aad5c9c">  276</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#a8b45ee724ab9e8b379f8ce614aad5c9c">Joint::ReadPosition</a>(uint8_t&amp; timeStamp, std::chrono::high_resolution_clock::time_point&amp; receptionTime,uint8_t&amp; errorFlags, uint8_t&amp; dataBits)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        int32_t ticks=<a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#aa09d9f7aeacd35782ca172764107148f">get_CurrentPosition</a>(timeStamp, receptionTime, errorFlags, dataBits);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#a10d1c516c93e1a062cf94721ed2a3b03">TicksToPosition</a>(ticks);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    </div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#aff5043164fe4b6a8013edb265566bc6f">  284</a></span>&#160;    int32_t <a class="code" href="classcpr__robot_1_1Joint.html#aff5043164fe4b6a8013edb265566bc6f">Joint::get_TicksPerMotorRotation</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#af242793ddfddbb4dd9d2188ada4f9063">m_TicksPerMotorRotation</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#af46b9bbb83cf215a76d9c6d817beffc2">  291</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#af46b9bbb83cf215a76d9c6d817beffc2">Joint::set_TicksPerMotorRotation</a>(<span class="keyword">const</span> int32_t ticks)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#af242793ddfddbb4dd9d2188ada4f9063">m_TicksPerMotorRotation</a>=ticks;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a78b3ad1e3f1a6530ff7aca0268eebf95">  298</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classcpr__robot_1_1Joint.html#a78b3ad1e3f1a6530ff7aca0268eebf95">Joint::get_GearRatio</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keyword">    </span>{</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcpr__robot_1_1Joint.html#a8ed8e435b58b761bf9f71834d52602a9">m_GearRatio</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        </div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a70750705d1cd35ead6d02d20275a531b">  305</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a70750705d1cd35ead6d02d20275a531b">Joint::set_GearRatio</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> ratio)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a8ed8e435b58b761bf9f71834d52602a9">m_GearRatio</a>=ratio;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a0525e748656f30822b053cada12a5c28">  311</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a0525e748656f30822b053cada12a5c28">Joint::EnableMotor</a>()</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#a91d3347c680ca092db8cc91b8e0efcf4">Enable</a>();</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a2cd4f2b6f903b9dc0a1c0efdd3730ebc">  317</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a2cd4f2b6f903b9dc0a1c0efdd3730ebc">Joint::DisableMotor</a>()</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#aca67c24562d035dcfeb7fe080bd3b890">Disable</a>();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a32252dc0f09283102d330245d36c1610">  323</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a32252dc0f09283102d330245d36c1610">Joint::Start</a>()</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#a81b0fb0f33c010e678efe29cd1f00351">Start</a>();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    </div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a4a368fe4e3bda8a756ea1154bcf97163">  329</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a4a368fe4e3bda8a756ea1154bcf97163">Joint::Stop</a>()</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#ae86a5af8f0b6a93491d01c2b1bdb2f42">Stop</a>();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a50d9ed5f46daeb1ce520adfc05d69935">  335</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a50d9ed5f46daeb1ce520adfc05d69935">Joint::StartReferencing</a>()</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#add8bae8a58eb06516895b28f4197d424">StartReferencing</a>();</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classcpr__robot_1_1Joint.html#a12d818f4010f72b482bfdce615238f54">  341</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classcpr__robot_1_1Joint.html#a12d818f4010f72b482bfdce615238f54">Joint::SetZero</a>()</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">m_pModule</a>-&gt;<a class="code" href="classcpr__robot_1_1MotorModule.html#a3196e087657a251e7e24ee854d6fb44a">SetZero</a>();</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div><div class="ttc" id="cpr__robot_8h_html"><div class="ttname"><a href="cpr__robot_8h.html">cpr_robot.h</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a54378769e81258582e8191fc0bc16085"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a54378769e81258582e8191fc0bc16085">cpr_robot::Joint::get_MotorOffset</a></div><div class="ttdeci">int32_t get_MotorOffset() const</div><div class="ttdoc">Gets the zero position of the motor. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00156">Joint.cpp:156</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a624d26c85789eada0b78d4748ec53d31"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a624d26c85789eada0b78d4748ec53d31">cpr_robot::Joint::Joint</a></div><div class="ttdeci">Joint(Bus &amp;canBus, const uint32_t moduleId)</div><div class="ttdoc">Constructs an instance of the Joint class. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00010">Joint.cpp:10</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_aa67b65fe13b6d43f97faf8d97aa2420f"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#aa67b65fe13b6d43f97faf8d97aa2420f">cpr_robot::Joint::get_ErrorFlags</a></div><div class="ttdeci">uint8_t get_ErrorFlags() const</div><div class="ttdoc">Gets the error flags that are currently reported by the firmware in the module that is controlling th...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00193">Joint.cpp:193</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_aa822474e44e6ac0486f34130ba7b99d9"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#aa822474e44e6ac0486f34130ba7b99d9">cpr_robot::Joint::m_CurrentPosition</a></div><div class="ttdeci">double m_CurrentPosition</div><div class="ttdoc">The current position of the joint computed from the encoder position and joint parameters in degrees...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00022">Joint.h:22</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a0acd393c18e0f4e6443e17c2e925072a"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a0acd393c18e0f4e6443e17c2e925072a">cpr_robot::Joint::get_MaxPosition</a></div><div class="ttdeci">double get_MaxPosition() const</div><div class="ttdoc">Gets the upper position bound of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00142">Joint.cpp:142</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_af46b9bbb83cf215a76d9c6d817beffc2"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#af46b9bbb83cf215a76d9c6d817beffc2">cpr_robot::Joint::set_TicksPerMotorRotation</a></div><div class="ttdeci">void set_TicksPerMotorRotation(const int32_t ticks)</div><div class="ttdoc">Sets the current number of ticks per motor rotation used during conversion from encoder position to j...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00291">Joint.cpp:291</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a8e570ed99b9e53ac085ec9fadd35eaa9"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a8e570ed99b9e53ac085ec9fadd35eaa9">cpr_robot::Joint::get_CurrentPosition</a></div><div class="ttdeci">double get_CurrentPosition() const</div><div class="ttdoc">Gets the current position of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00056">Joint.cpp:56</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_add8bae8a58eb06516895b28f4197d424"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#add8bae8a58eb06516895b28f4197d424">cpr_robot::MotorModule::StartReferencing</a></div><div class="ttdeci">void StartReferencing()</div><div class="ttdoc">Starts the referencing procedure. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00313">MotorModule.cpp:313</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_acae1e70cf1b034e7ac73a4c3769560b0"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#acae1e70cf1b034e7ac73a4c3769560b0">cpr_robot::Joint::set_MotorOffset</a></div><div class="ttdeci">void set_MotorOffset(const int32_t ticks)</div><div class="ttdoc">Sets the zero position of the motor. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00163">Joint.cpp:163</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_aa21d4f01d0ebcb0902e2b75098d505de"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#aa21d4f01d0ebcb0902e2b75098d505de">cpr_robot::MotorModule::set_MinPosition</a></div><div class="ttdeci">void set_MinPosition(const int32_t ticks)</div><div class="ttdoc">Sets the minimally allowed encoder position. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00358">MotorModule.cpp:358</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_a91d3347c680ca092db8cc91b8e0efcf4"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#a91d3347c680ca092db8cc91b8e0efcf4">cpr_robot::MotorModule::Enable</a></div><div class="ttdeci">void Enable()</div><div class="ttdoc">Enables motor motion. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00290">MotorModule.cpp:290</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a9b62b0ed8dfdb4ba932cdae1370b3d08"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a9b62b0ed8dfdb4ba932cdae1370b3d08">cpr_robot::Joint::Write</a></div><div class="ttdeci">void Write(double override)</div><div class="ttdoc">Sends the current motion commands to the firmware in the module that is controlling the motor of the ...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00252">Joint.cpp:252</a></div></div>
<div class="ttc" id="namespacecpr__robot_html"><div class="ttname"><a href="namespacecpr__robot.html">cpr_robot</a></div><div class="ttdoc">Provides everything needed to control a robot over a CAN bus connection within a ROS environment...</div><div class="ttdef"><b>Definition:</b> <a href="Bus_8h_source.html#l00003">Bus.h:3</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a70e6876e7b53b1764f3275d6ab0bb7a0"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a70e6876e7b53b1764f3275d6ab0bb7a0">cpr_robot::Joint::PublishState</a></div><div class="ttdeci">void PublishState(sensor_msgs::JointState &amp;msg)</div><div class="ttdoc">Used when publishing joint states. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00262">Joint.cpp:262</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_aca67c24562d035dcfeb7fe080bd3b890"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#aca67c24562d035dcfeb7fe080bd3b890">cpr_robot::MotorModule::Disable</a></div><div class="ttdeci">void Disable()</div><div class="ttdoc">Disables motor motion. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00306">MotorModule.cpp:306</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a893c05463055ae975a60e8dbd643d288"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a893c05463055ae975a60e8dbd643d288">cpr_robot::Joint::Init</a></div><div class="ttdeci">void Init()</div><div class="ttdoc">Initializes the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00235">Joint.cpp:235</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_a3196e087657a251e7e24ee854d6fb44a"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#a3196e087657a251e7e24ee854d6fb44a">cpr_robot::MotorModule::SetZero</a></div><div class="ttdeci">void SetZero()</div><div class="ttdoc">Sets the encoder position to zero. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00322">MotorModule.cpp:322</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a0df4c7eef1f2708d5a1df02e37d4f77d"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a0df4c7eef1f2708d5a1df02e37d4f77d">cpr_robot::Joint::JointJogCallback</a></div><div class="ttdeci">void JointJogCallback(const control_msgs::JointJog &amp;msg)</div><div class="ttdoc">Callback for received messages on the /JointJog ROS topic. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00091">Joint.cpp:91</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_a81b0fb0f33c010e678efe29cd1f00351"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#a81b0fb0f33c010e678efe29cd1f00351">cpr_robot::MotorModule::Start</a></div><div class="ttdeci">void Start()</div><div class="ttdoc">Starts the thread that is spinning in the write loop that sends periodic SetJoint commands to the mod...</div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00080">MotorModule.cpp:80</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_ac03ee9878d68ac22e206141a49af61f1"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#ac03ee9878d68ac22e206141a49af61f1">cpr_robot::Joint::get_CurrentEffort</a></div><div class="ttdeci">double get_CurrentEffort() const</div><div class="ttdoc">Gets the effort that is put into moving the joing. Currently not implemented. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00070">Joint.cpp:70</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a4a368fe4e3bda8a756ea1154bcf97163"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a4a368fe4e3bda8a756ea1154bcf97163">cpr_robot::Joint::Stop</a></div><div class="ttdeci">void Stop()</div><div class="ttdoc">Will stop the communication with the firmware of the module that is controlling the motor of the join...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00329">Joint.cpp:329</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Bus_html"><div class="ttname"><a href="classcpr__robot_1_1Bus.html">cpr_robot::Bus</a></div><div class="ttdoc">Used for communication over the CAN bus. </div><div class="ttdef"><b>Definition:</b> <a href="Bus_8h_source.html#l00009">Bus.h:9</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_a9a00b6e1ca0a4009837bccbd44c8430e"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#a9a00b6e1ca0a4009837bccbd44c8430e">cpr_robot::MotorModule::set_Increment</a></div><div class="ttdeci">void set_Increment(const int32_t ticks)</div><div class="ttdoc">Sets the desired encoder tick increment. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00010">MotorModule.cpp:10</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_a83693cf0ff616483070eb11dc3038ef4"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#a83693cf0ff616483070eb11dc3038ef4">cpr_robot::MotorModule::get_MinPosition</a></div><div class="ttdeci">int32_t get_MinPosition() const</div><div class="ttdoc">Gets the minimally allowed encoder position. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00351">MotorModule.cpp:351</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a5229089b4b34099ed5342555ce08abd2"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a5229089b4b34099ed5342555ce08abd2">cpr_robot::Joint::OnRead</a></div><div class="ttdeci">virtual void OnRead()</div><div class="ttdoc">Reads the current state of the joint from the firmware. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00171">Joint.cpp:171</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a2a3c49a2aab7a7b20afe28106268e750"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a2a3c49a2aab7a7b20afe28106268e750">cpr_robot::Joint::m_MaxVelocity</a></div><div class="ttdeci">double m_MaxVelocity</div><div class="ttdoc">The maximum angular velocity of the joint in radians per second. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00032">Joint.h:32</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_a5c801f5be9982ac07a54c803dc5f96c2"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#a5c801f5be9982ac07a54c803dc5f96c2">cpr_robot::MotorModule::get_Offset</a></div><div class="ttdeci">int32_t get_Offset() const</div><div class="ttdoc">Gets the constant offset to be added to the motor position (&quot;zero position&quot;), measured in ticks...</div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00047">MotorModule.cpp:47</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_afd75fadedb39663cf1ed1ea2b345e315"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#afd75fadedb39663cf1ed1ea2b345e315">cpr_robot::Joint::get_MinPosition</a></div><div class="ttdeci">double get_MinPosition() const</div><div class="ttdoc">Gets the lower position bound of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00128">Joint.cpp:128</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html">cpr_robot::MotorModule</a></div><div class="ttdoc">Represents a DIN rail motorcontrol module from Commonplace Robotics GmbH. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8h_source.html#l00011">MotorModule.h:11</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a70750705d1cd35ead6d02d20275a531b"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a70750705d1cd35ead6d02d20275a531b">cpr_robot::Joint::set_GearRatio</a></div><div class="ttdeci">void set_GearRatio(const double ratio)</div><div class="ttdoc">Sets the current gear ratio that is used during conversion from encoder position to joint position...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00305">Joint.cpp:305</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_a30ccc0642ad9fd96581f76e267737552"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#a30ccc0642ad9fd96581f76e267737552">cpr_robot::MotorModule::set_Offset</a></div><div class="ttdeci">void set_Offset(const int32_t ticks)</div><div class="ttdoc">Sets the constant offset to be added to the motor position (&quot;zero position&quot;), measured in ticks...</div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00054">MotorModule.cpp:54</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a8e143914f01de10b06417f3658064152"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a8e143914f01de10b06417f3658064152">cpr_robot::Joint::m_LastUpdate</a></div><div class="ttdeci">std::chrono::high_resolution_clock::time_point m_LastUpdate</div><div class="ttdoc">The time at which the last status message has been received from the firmware in the module that is c...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00042">Joint.h:42</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a31d7af000c1a4c2963de43e9eb07e9a2"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a31d7af000c1a4c2963de43e9eb07e9a2">cpr_robot::Joint::set_MaxVelocity</a></div><div class="ttdeci">void set_MaxVelocity(const double velocity)</div><div class="ttdoc">Sets the maximum allowed angular velocity of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00121">Joint.cpp:121</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a12d818f4010f72b482bfdce615238f54"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a12d818f4010f72b482bfdce615238f54">cpr_robot::Joint::SetZero</a></div><div class="ttdeci">void SetZero()</div><div class="ttdoc">Will send a command to reset the encoder position for the joint to the firmware of the module that is...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00341">Joint.cpp:341</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a2763db45968efc6e978f9c7119b0e78c"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a2763db45968efc6e978f9c7119b0e78c">cpr_robot::Joint::m_JointJogSubscriber</a></div><div class="ttdeci">ros::Subscriber m_JointJogSubscriber</div><div class="ttdoc">The ROS subscriber for the /JointJog topic which will receive jog messages. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00044">Joint.h:44</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_ae11a3a53211f6729f6dc8026d90f7485"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#ae11a3a53211f6729f6dc8026d90f7485">cpr_robot::MotorModule::get_UpdateInterval</a></div><div class="ttdeci">double get_UpdateInterval() const</div><div class="ttdoc">Gets the interval at which periodic SetJoint commands will be sent to the module in milliseconds...</div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00147">MotorModule.cpp:147</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_ade16600f46e08cffd4f9d72bfd1bb282"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#ade16600f46e08cffd4f9d72bfd1bb282">cpr_robot::Joint::m_JointName</a></div><div class="ttdeci">std::string m_JointName</div><div class="ttdoc">The name used for this joint when communicating over ROS topics and services. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00038">Joint.h:38</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_ab7e08d821b4bfc5a0373414cbbb3e339"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#ab7e08d821b4bfc5a0373414cbbb3e339">cpr_robot::Joint::m_CurrentEffort</a></div><div class="ttdeci">double m_CurrentEffort</div><div class="ttdoc">Reserved for future use with closed loop joints. Currently always zero. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00026">Joint.h:26</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_a3953bfd3ff03b158d45755577dda6118"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#a3953bfd3ff03b158d45755577dda6118">cpr_robot::MotorModule::get_MaxPosition</a></div><div class="ttdeci">int32_t get_MaxPosition() const</div><div class="ttdoc">Gets the maximally allowed encoder position. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00337">MotorModule.cpp:337</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_af314a7c4bda98201201ce6c85e141e1f"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#af314a7c4bda98201201ce6c85e141e1f">cpr_robot::Joint::OnInit</a></div><div class="ttdeci">virtual void OnInit()</div><div class="ttdoc">Initialization. Should only be called after the parameters (gear ratio, ticks per motor rotation) hav...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00078">Joint.cpp:78</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a6ef10911d6217928226ad40b3b35620b"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a6ef10911d6217928226ad40b3b35620b">cpr_robot::Joint::DATABIT_REFERENCED</a></div><div class="ttdeci">static constexpr uint8_t DATABIT_REFERENCED</div><div class="ttdoc">Status bit indicating that the joint has been referenced. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00013">Joint.h:13</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a8ed8e435b58b761bf9f71834d52602a9"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a8ed8e435b58b761bf9f71834d52602a9">cpr_robot::Joint::m_GearRatio</a></div><div class="ttdeci">double m_GearRatio</div><div class="ttdoc">The total gear ratio of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00028">Joint.h:28</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a4da092bb68fa9d4ada9f29ce90d6a1b5"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a4da092bb68fa9d4ada9f29ce90d6a1b5">cpr_robot::Joint::m_bReferenced</a></div><div class="ttdeci">bool m_bReferenced</div><div class="ttdoc">Flag indicating whether the joint is reported as referenced by the firmware. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00016">Joint.h:16</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_ae83d37ec4d8e876b4d70e074172bef16"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#ae83d37ec4d8e876b4d70e074172bef16">cpr_robot::MotorModule::set_MaxPosition</a></div><div class="ttdeci">void set_MaxPosition(const int32_t ticks)</div><div class="ttdoc">Sets the maximally allowed encoder position. </div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00344">MotorModule.cpp:344</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_ace02fdff906b085f97b21d30542d57a5"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#ace02fdff906b085f97b21d30542d57a5">cpr_robot::Joint::set_MaxPosition</a></div><div class="ttdeci">void set_MaxPosition(const double position)</div><div class="ttdoc">Sets the upper position bound of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00149">Joint.cpp:149</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_ad887b96410906536a29c1b933507b59b"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#ad887b96410906536a29c1b933507b59b">cpr_robot::Joint::m_DesiredVelocity</a></div><div class="ttdeci">double m_DesiredVelocity</div><div class="ttdoc">The desired angular velocity of the joint in radians per second. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00030">Joint.h:30</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a32252dc0f09283102d330245d36c1610"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a32252dc0f09283102d330245d36c1610">cpr_robot::Joint::Start</a></div><div class="ttdeci">void Start()</div><div class="ttdoc">Will start the communication with the firmware of the module that is controlling the motor of the joi...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00323">Joint.cpp:323</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a3578f2c7039da34d4c9c14697aea345f"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a3578f2c7039da34d4c9c14697aea345f">cpr_robot::Joint::get_DesiredVelocity</a></div><div class="ttdeci">double get_DesiredVelocity() const</div><div class="ttdoc">Gets the desired angular velocity of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00107">Joint.cpp:107</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a2cd4f2b6f903b9dc0a1c0efdd3730ebc"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a2cd4f2b6f903b9dc0a1c0efdd3730ebc">cpr_robot::Joint::DisableMotor</a></div><div class="ttdeci">void DisableMotor()</div><div class="ttdoc">Will send a command to disable motor motion to the firmware of the module that is controlling the mot...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00317">Joint.cpp:317</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a438a490b29b4b19817f2a2b8948ad3bd"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a438a490b29b4b19817f2a2b8948ad3bd">cpr_robot::Joint::get_IsReferenced</a></div><div class="ttdeci">bool get_IsReferenced() const</div><div class="ttdoc">Allows to determine if the joint has been referenced. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00029">Joint.cpp:29</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a1109c9bcdd0ca8e32ebf8b19b9eb84e6"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a1109c9bcdd0ca8e32ebf8b19b9eb84e6">cpr_robot::Joint::m_Node</a></div><div class="ttdeci">ros::NodeHandle m_Node</div><div class="ttdoc">A handle to the current ROS node. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00018">Joint.h:18</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a81679f78d8804ef49bcdb6947a6f290e"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a81679f78d8804ef49bcdb6947a6f290e">cpr_robot::Joint::Read</a></div><div class="ttdeci">void Read()</div><div class="ttdoc">Reads the current state of the joint from the firmware in the module that is controlling the motor of...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00243">Joint.cpp:243</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a922b09195ef7a3eb6497695ffd67a72e"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a922b09195ef7a3eb6497695ffd67a72e">cpr_robot::Joint::set_MinPosition</a></div><div class="ttdeci">void set_MinPosition(const double position)</div><div class="ttdoc">Sets the lower position bound of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00135">Joint.cpp:135</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a0525e748656f30822b053cada12a5c28"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a0525e748656f30822b053cada12a5c28">cpr_robot::Joint::EnableMotor</a></div><div class="ttdeci">void EnableMotor()</div><div class="ttdoc">Will send a command to enable motor motion to the firmware of the module that is controlling the moto...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00311">Joint.cpp:311</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_af242793ddfddbb4dd9d2188ada4f9063"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#af242793ddfddbb4dd9d2188ada4f9063">cpr_robot::Joint::m_TicksPerMotorRotation</a></div><div class="ttdeci">int32_t m_TicksPerMotorRotation</div><div class="ttdoc">The number of encoder ticks representing exactly one rotation of the motor that is driving this joint...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00036">Joint.h:36</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a056c464a5860aecbb51b7e0693dd6d89"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a056c464a5860aecbb51b7e0693dd6d89">cpr_robot::Joint::m_pModule</a></div><div class="ttdeci">MotorModule * m_pModule</div><div class="ttdoc">Pointer to an instance of the MotorModule class which represents the module and firmware driving the ...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00020">Joint.h:20</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a66a0e2cbdd5f222bafac25f4c01b3ca8"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a66a0e2cbdd5f222bafac25f4c01b3ca8">cpr_robot::Joint::set_JointName</a></div><div class="ttdeci">void set_JointName(const std::string &amp;jointName)</div><div class="ttdoc">Sets the name of the joint used when communicating over ROS topics and services. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00049">Joint.cpp:49</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a10d1c516c93e1a062cf94721ed2a3b03"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a10d1c516c93e1a062cf94721ed2a3b03">cpr_robot::Joint::TicksToPosition</a></div><div class="ttdeci">double TicksToPosition(const int32_t ticks) const</div><div class="ttdoc">Converts a motor position to a joint position. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00211">Joint.cpp:211</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_aff5043164fe4b6a8013edb265566bc6f"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#aff5043164fe4b6a8013edb265566bc6f">cpr_robot::Joint::get_TicksPerMotorRotation</a></div><div class="ttdeci">int32_t get_TicksPerMotorRotation() const</div><div class="ttdoc">Gets the current number of ticks per motor rotation used during conversion from encoder position to j...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00284">Joint.cpp:284</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_ae86a5af8f0b6a93491d01c2b1bdb2f42"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#ae86a5af8f0b6a93491d01c2b1bdb2f42">cpr_robot::MotorModule::Stop</a></div><div class="ttdeci">void Stop()</div><div class="ttdoc">Terminates and joins the thread that is spinning in the write loop that sends periodic SetJoint comma...</div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00068">MotorModule.cpp:68</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a899b6077763552761845ab31f79214a1"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a899b6077763552761845ab31f79214a1">cpr_robot::Joint::~Joint</a></div><div class="ttdeci">virtual ~Joint()</div><div class="ttdoc">The destructor of the Joint class. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00035">Joint.cpp:35</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a50d9ed5f46daeb1ce520adfc05d69935"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a50d9ed5f46daeb1ce520adfc05d69935">cpr_robot::Joint::StartReferencing</a></div><div class="ttdeci">void StartReferencing()</div><div class="ttdoc">Will send a command to begin the referencing procedure for the joint to the firmware of the module th...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00335">Joint.cpp:335</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_aefe1109a5974ffb681e79c57147ff36e"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#aefe1109a5974ffb681e79c57147ff36e">cpr_robot::Joint::m_ErrorFlags</a></div><div class="ttdeci">uint8_t m_ErrorFlags</div><div class="ttdoc">The error flags reported by the firmware of the module that is controlling the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00034">Joint.h:34</a></div></div>
<div class="ttc" id="classcpr__robot_1_1MotorModule_html_aa09d9f7aeacd35782ca172764107148f"><div class="ttname"><a href="classcpr__robot_1_1MotorModule.html#aa09d9f7aeacd35782ca172764107148f">cpr_robot::MotorModule::get_CurrentPosition</a></div><div class="ttdeci">int32_t get_CurrentPosition(uint8_t &amp;timeStamp, std::chrono::high_resolution_clock::time_point &amp;receptionTime, uint8_t &amp;errorFlags, uint8_t &amp;dataBits) const</div><div class="ttdoc">Allows to query the last response to a SetJoint command that has been received from the module...</div><div class="ttdef"><b>Definition:</b> <a href="MotorModule_8cpp_source.html#l00268">MotorModule.cpp:268</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a54a2c42a9f717031ca65ef96e774dc09"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a54a2c42a9f717031ca65ef96e774dc09">cpr_robot::Joint::get_JointName</a></div><div class="ttdeci">const std::string &amp; get_JointName() const</div><div class="ttdoc">Gets the name of the joint used when communicating over ROS topics and services. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00042">Joint.cpp:42</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a5df47f7a0ee1901f9f8351eaa5333cee"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a5df47f7a0ee1901f9f8351eaa5333cee">cpr_robot::Joint::OnWrite</a></div><div class="ttdeci">virtual void OnWrite(double override)</div><div class="ttdoc">Sends the current motion commands to the firmware in the module that is controlling the motor of the ...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00221">Joint.cpp:221</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a592cd8bcfe74f251e230197430492d1f"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a592cd8bcfe74f251e230197430492d1f">cpr_robot::Joint::m_CurrentVelocity</a></div><div class="ttdeci">double m_CurrentVelocity</div><div class="ttdoc">The current angular velocity of the joint computed from the change in encoder position and joint para...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00024">Joint.h:24</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a78b3ad1e3f1a6530ff7aca0268eebf95"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a78b3ad1e3f1a6530ff7aca0268eebf95">cpr_robot::Joint::get_GearRatio</a></div><div class="ttdeci">double get_GearRatio() const</div><div class="ttdoc">Gets the current gear ratio that is used during conversion from encoder position to joint position...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00298">Joint.cpp:298</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a9c7abfbbd295ba8dd434c7ec170279a3"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a9c7abfbbd295ba8dd434c7ec170279a3">cpr_robot::Joint::m_LastTimeStamp</a></div><div class="ttdeci">uint8_t m_LastTimeStamp</div><div class="ttdoc">The timestamp of the last status message received from the firmware in the module that is controlling...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8h_source.html#l00040">Joint.h:40</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a8b45ee724ab9e8b379f8ce614aad5c9c"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a8b45ee724ab9e8b379f8ce614aad5c9c">cpr_robot::Joint::ReadPosition</a></div><div class="ttdeci">double ReadPosition(uint8_t &amp;timeStamp, std::chrono::high_resolution_clock::time_point &amp;receptionTime, uint8_t &amp;errorFlags, uint8_t &amp;dataBits)</div><div class="ttdoc">Returns the position of the joint according to the last update received from the firmware that is con...</div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00276">Joint.cpp:276</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a140b26d969f491c8242231aefa634634"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a140b26d969f491c8242231aefa634634">cpr_robot::Joint::get_CurrentVelocity</a></div><div class="ttdeci">double get_CurrentVelocity() const</div><div class="ttdoc">Gets the current angular velocity of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00063">Joint.cpp:63</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a87fa401b2e67be3bd622c0bed09b0fef"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a87fa401b2e67be3bd622c0bed09b0fef">cpr_robot::Joint::get_MaxVeclocity</a></div><div class="ttdeci">double get_MaxVeclocity() const</div><div class="ttdoc">Gets the maximum allowed angular velocity of the joint. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00114">Joint.cpp:114</a></div></div>
<div class="ttc" id="classcpr__robot_1_1Joint_html_a05bf10900f6cfa8c1b78e0612636e175"><div class="ttname"><a href="classcpr__robot_1_1Joint.html#a05bf10900f6cfa8c1b78e0612636e175">cpr_robot::Joint::PositionToTicks</a></div><div class="ttdeci">int32_t PositionToTicks(const double position) const</div><div class="ttdoc">Converts a joint position to a motor position. </div><div class="ttdef"><b>Definition:</b> <a href="Joint_8cpp_source.html#l00201">Joint.cpp:201</a></div></div>
</div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/cpr_robot">cpr_robot</a><br />
Author(s): </br />
<small>autogenerated on Thu Jun 13 2019 10:47:30</small>
</div>
</body>
</html>
